(this["webpackJsonpkibagare-academy-center-cbo"]=this["webpackJsonpkibagare-academy-center-cbo"]||[]).push([[0],{580:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(30),c=n.n(r),i=n(11),o=n(12),s=n(13),u=n(14),d=n(24),l=n(75),h=n(51),j=n(286),O=n.n(j),p=n(23);var b=function(){var e=new Headers({"Access-Control-Allow-Origin":"*"}),t="/students",n=Object(a.useState)([]),r=Object(h.a)(n,2),c=r[0],i=r[1];Object(a.useEffect)((function(){o()}),[]);var o=function(){fetch(t,{header:e}).then((function(e){return e.json()})).then((function(e){return i(e)}))},s=[{title:"NAMES",field:"names",validate:function(e){return void 0!==e.names&&""!==e.names||"Required"}},{title:"id",field:"id",validate:function(e){return void 0!==e.id&&""!==e.id||"Required"}},{title:"DateOfBirth",field:"DateOfBirth",validate:function(e){return void 0!==e.DateOfBirth&&""!==e.DateOfBirth||"Required"}},{title:"classroom_id",field:"classroom_id",validate:function(e){return void 0!==e.classroom_id&&""!==e.classroom_id||"Required"}}];return Object(p.jsx)("div",{children:Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(O.a,{title:"Students Table",columns:s,data:c,options:{actionsColumnIndex:-1,addRowPosition:"first"},editable:{onRowAdd:function(e){return new Promise((function(n,a){fetch(t,{method:"PATCH",headers:{accept:"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){o(),n()}))}))},onRowUpdate:function(e,n){return new Promise((function(a,r){fetch(t+"/"+n.id,{method:"PATCH",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){o(),a()}))}))},onRowDelete:function(e){return new Promise((function(n,a){fetch(t+"/"+e.admision_number,{method:"DELETE",headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){o(),n()}))}))}}})})})};function f(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)("div",{style:{width:"100%",display:"flex"},children:Object(p.jsx)(b,{})})})}var m=n(587),g=n(589),S=n(45),v=n(84),y=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(S.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.logInUser(e.state),e.setState({email:"",password:""})},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"login-page",children:Object(p.jsx)("div",{className:"login-signup",children:Object(p.jsxs)("div",{className:"login-signup-container",children:[Object(p.jsx)("div",{className:"title",children:"Log In"}),Object(p.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(p.jsx)("input",{type:"text",placeholder:"Email Address",name:"email",onChange:this.handleChange,value:this.state.email}),Object(p.jsx)("input",{type:"password",placeholder:"Password",name:"password",onChange:this.handleChange,value:this.state.password}),Object(p.jsx)("button",{type:"submit",children:"Log In"})]}),Object(p.jsxs)("div",{className:"alt",children:["Don't have an account?"," ",Object(p.jsx)(v.b,{to:"/signup",className:"link",children:"Sign Up"})]})]})})})}}]),n}(a.Component),C=Object(l.b)(null,(function(e){return{logInUser:function(t){return e(function(e){return function(t){t({type:"LOGGING_IN",userInfo:e}),fetch("http://localhost:3003/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:localStorage.token},body:JSON.stringify({session:e})}).then((function(e){return e.json()})).then((function(e){e.error?alert(e.error):(localStorage.setItem("user",JSON.stringify(e.user)),localStorage.setItem("token",e.jwt),t({type:"LOGIN_SUCCESS",data:e}),window.history.pushState(e.user,"","/Home"))}))}}(t))}}}))(y),_=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token"),t=localStorage.getItem("user");e&&t&&this.props.fetchCurrentUser()}},{key:"render",value:function(){var e=Object(m.a)({typography:{fontFamily:"Poppins"},palette:{primary:{main:"#0F43F9"}}});return Object(p.jsx)("div",{children:Object(p.jsx)(g.a,{theme:e,children:Object(p.jsx)("div",{children:Object(p.jsxs)(d.c,{children:[Object(p.jsx)(d.a,{path:"/home",element:Object(p.jsx)(f,{})}),Object(p.jsx)(d.a,{path:"/",element:Object(p.jsx)(C,{})}),Object(p.jsx)(d.a,{path:"/home",element:Object(p.jsx)(f,{})}),Object(p.jsx)(d.a,{path:"/MTStudet",element:Object(p.jsx)(b,{})})]})})})})}}]),n}(a.Component),w=Object(l.b)((function(e){return{user:e.user.user,isloggedIn:e.user.isLoggedIn}}),(function(e){return{fetchCurrentUser:function(){return e((function(e){return fetch("http://localhost:3000/authorized",{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:localStorage.token}}).then((function(e){return e.json()})).then((function(t){t.error?(localStorage.removeItem("token"),localStorage.removeItem("user")):(e({type:"LOGIN_SUCCESS",data:t}),window.history.pushState(t.user,"","/dashboard"))}))}))}}}))(_),I=n(39),E=n(28),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:null,isLoggedIn:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNING_UP":case"LOGGING_IN":return Object(E.a)(Object(E.a)({},e),{},{user:t.userInfo});case"SIGNUP_SUCCESS":case"LOGIN_SUCCESS":return{user:t.data,isLoggedIn:!0};case"LOGGED_OUT":return Object(E.a)(Object(E.a)({},e),{},{user:null,isLoggedIn:!1});case"REFRESH_DASHBOARD":var n=t.data.user||t.data;return Object(E.a)(Object(E.a)({},e),{},{user:n});default:return e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userTripsFetched:!1,newTripCreated:!1,newPlaceAdded:!1,showFetchedTrip:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_TRIPS_FETCHED":return Object(E.a)(Object(E.a)({},e),{},{userTripsFetched:!0});case"TRIP_CREATED":return Object(E.a)(Object(E.a)({},e),{},{newTripCreated:!0});case"CLEAR_TRIP_CREATED_STATUS":return Object(E.a)(Object(E.a)({},e),{},{newTripCreated:!1});case"FETCH_A_TRIP":return Object(E.a)(Object(E.a)({},e),{},{showFetchedTrip:t.data});case"CLEAR_FETCHED_TRIP":return Object(E.a)(Object(E.a)({},e),{},{showFetchedTrip:null});case"ADD_PLACE_TO_TRIP":return Object(E.a)(Object(E.a)({},e),{},{newPlaceAdded:!0});case"CLEAR_PLACE_ADDED_STATUS":return Object(E.a)(Object(E.a)({},e),{},{newPlaceAdded:!1});default:return e}},A={isOpen:!1,type:null},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MODAL":return{isOpen:!0,type:t.modalInfo.type};case"HIDE_MODAL":return A;default:return e}},N=Object(I.c)({user:T,trips:x,modal:D}),R=n(293),P=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||I.d,L=Object(I.e)(N,P(Object(I.a)(R.a)));c.a.render(Object(p.jsx)(l.a,{store:L,children:Object(p.jsx)(v.a,{children:Object(p.jsx)(w,{})})}),document.getElementById("root"))}},[[580,1,2]]]);
//# sourceMappingURL=main.a90db7ec.chunk.js.map